{"version":3,"sources":["../src/index.js"],"names":["_userManager","state","oidcUser","_document","onUserLoaded","user","onUserUnloaded","onAccessTokenExpired","signinSilent","onError","error","init","config","document","window","UserManager","events","addUserLoaded","addSilentRenewError","addUserUnloaded","addUserSignedOut","addAccessTokenExpired","location","toString","includes","redirect_uri","signinRedirectCallback","then","url","type","silent_redirect_uri","signinSilentCallback","getUser","logout","removeUserLoaded","removeSilentRenewError","removeUserUnloaded","removeUserSignedOut","removeAccessTokenExpired","signinRedirect","getUserSync"],"mappings":";;;;;;;AACA;;AADA;AAGA,IAAIA,YAAY,GAAG,IAAnB;AACA,IAAIC,KAAK,GAAG;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAZ;AACA,IAAIC,SAAS,GAAG,IAAhB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,IAAI,EAAI;AAC3BJ,EAAAA,KAAK,GAAG;AACNC,IAAAA,QAAQ,EAAEG;AADJ,GAAR;AAGD,CAJD;;AAMA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BL,EAAAA,KAAK,GAAG;AACNC,IAAAA,QAAQ,EAAE;AADJ,GAAR;AAGD,CAJD;;AAMA,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACjCN,EAAAA,KAAK,GAAG;AACNC,IAAAA,QAAQ,EAAE;AADJ,GAAR;AAGA,SAAOF,YAAY,CAACQ,YAAb,EAAP;AACD,CALD;;AAOA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,KAAK,EAAI;AACvBT,EAAAA,KAAK,GAAG;AACNS,IAAAA,KAAK,EAALA;AADM,GAAR;AAGD,CAJD;;AAMA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,MAAD,EAAwC;AAAA,MAA/BC,QAA+B,uEAApBC,MAAM,CAACD,QAAa;AACnDb,EAAAA,YAAY,GAAG,IAAIe,uBAAJ,CAAgBH,MAAhB,CAAf;AADmD,sBAEhCZ,YAFgC;AAAA,MAE3CgB,MAF2C,iBAE3CA,MAF2C;AAGnDA,EAAAA,MAAM,CAACC,aAAP,CAAqBb,YAArB;AACAY,EAAAA,MAAM,CAACE,mBAAP,CAA2BT,OAA3B;AACAO,EAAAA,MAAM,CAACG,eAAP,CAAuBb,cAAvB;AACAU,EAAAA,MAAM,CAACI,gBAAP,CAAwBd,cAAxB;AACAU,EAAAA,MAAM,CAACK,qBAAP,CAA6Bd,oBAA7B;AACAJ,EAAAA,SAAS,GAAGU,QAAZ;;AACA,MAAIV,SAAS,CAACmB,QAAV,CAAmBC,QAAnB,GAA8BC,QAA9B,CAAuCZ,MAAM,CAACa,YAA9C,CAAJ,EAAiE;AAC/D,WAAOzB,YAAY,CAChB0B,sBADI,GAEJC,IAFI,CAEC,UAAAtB,IAAI,EAAI;AACZ,UAAIA,IAAI,CAACJ,KAAL,CAAW2B,GAAf,EAAoB;AAClBzB,QAAAA,SAAS,CAACmB,QAAV,GAAqBjB,IAAI,CAACJ,KAAL,CAAW2B,GAAhC;AACD;AACF,KANI,EAOJD,IAPI,CAOC,YAAM;AACV,aAAO;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAP;AACD,KATI,CAAP;AAUD;;AACD,MAAI1B,SAAS,CAACmB,QAAV,CAAmBC,QAAnB,GAA8BC,QAA9B,CAAuCZ,MAAM,CAACkB,mBAA9C,CAAJ,EAAwE;AACtE,WAAO9B,YAAY,CAAC+B,oBAAb,GAAoCJ,IAApC,CAAyC;AAAA,aAAO;AACrDE,QAAAA,IAAI,EAAE;AAD+C,OAAP;AAAA,KAAzC,CAAP;AAGD;;AACD,SAAO7B,YAAY,CAACgC,OAAb,GAAuBL,IAAvB,CAA4B,UAAAtB,IAAI,EAAI;AACzCJ,IAAAA,KAAK,CAACC,QAAN,GAAiBG,IAAjB;AACA,WAAO;AAAEwB,MAAAA,IAAI,EAAE,MAAR;AAAgBxB,MAAAA,IAAI,EAAJA;AAAhB,KAAP;AACD,GAHM,CAAP;AAID,CA9BD;;AAgCA,IAAM4B,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBhC,EAAAA,KAAK,GAAG;AACNC,IAAAA,QAAQ,EAAE;AADJ,GAAR;AADmB,sBAIAF,YAJA;AAAA,MAIXgB,MAJW,iBAIXA,MAJW;AAKnBA,EAAAA,MAAM,CAACkB,gBAAP,CAAwB9B,YAAxB;AACAY,EAAAA,MAAM,CAACmB,sBAAP,CAA8B1B,OAA9B;AACAO,EAAAA,MAAM,CAACoB,kBAAP,CAA0B9B,cAA1B;AACAU,EAAAA,MAAM,CAACqB,mBAAP,CAA2B/B,cAA3B;AACAU,EAAAA,MAAM,CAACsB,wBAAP,CAAgC/B,oBAAhC;AACD,CAVD;;AAYA,SAASC,YAAT,GAAwB;AACtBP,EAAAA,KAAK,GAAG;AACNC,IAAAA,QAAQ,EAAE;AADJ,GAAR;AAGA,SAAOF,YAAY,CAACQ,YAAb,EAAP;AACD;;AAED,SAAS+B,cAAT,CAAwBX,GAAxB,EAA6B;AAC3B,MAAI,CAACA,GAAL,EAAU;AACRA,IAAAA,GAAG,GAAGzB,SAAS,CAACmB,QAAV,CAAmBC,QAAnB,EAAN;AACD;;AACD,SAAOvB,YAAY,CAACuC,cAAb,CAA4B;AACjCtC,IAAAA,KAAK,EAAE;AAAE2B,MAAAA,GAAG,EAAEA;AAAP;AAD0B,GAA5B,CAAP;AAGD;;eAEc;AACb3B,EAAAA,KAAK,EAALA,KADa;AAEbsC,EAAAA,cAAc,EAAdA,cAFa;AAGb/B,EAAAA,YAAY,EAAZA,YAHa;AAIbyB,EAAAA,MAAM,EAANA,MAJa;AAKbtB,EAAAA,IAAI,EAAJA,IALa;AAMb6B,EAAAA,WANa,yBAMC;AACZ,WAAOvC,KAAK,CAACC,QAAb;AACD;AARY,C","sourcesContent":["/* eslint-disable */\r\nimport { UserManager } from \"oidc-client\";\r\n\r\nlet _userManager = null;\r\nlet state = { oidcUser: null };\r\nlet _document = null;\r\n\r\nconst onUserLoaded = user => {\r\n  state = {\r\n    oidcUser: user\r\n  };\r\n};\r\n\r\nconst onUserUnloaded = () => {\r\n  state = {\r\n    oidcUser: null\r\n  };\r\n};\r\n\r\nconst onAccessTokenExpired = () => {\r\n  state = {\r\n    oidcUser: null\r\n  };\r\n  return _userManager.signinSilent();\r\n};\r\n\r\nconst onError = error => {\r\n  state = {\r\n    error\r\n  };\r\n};\r\n\r\nconst init = (config, document = window.document) => {\r\n  _userManager = new UserManager(config);\r\n  const { events } = _userManager;\r\n  events.addUserLoaded(onUserLoaded);\r\n  events.addSilentRenewError(onError);\r\n  events.addUserUnloaded(onUserUnloaded);\r\n  events.addUserSignedOut(onUserUnloaded);\r\n  events.addAccessTokenExpired(onAccessTokenExpired);\r\n  _document = document;\r\n  if (_document.location.toString().includes(config.redirect_uri)) {\r\n    return _userManager\r\n      .signinRedirectCallback()\r\n      .then(user => {\r\n        if (user.state.url) {\r\n          _document.location = user.state.url;\r\n        }\r\n      })\r\n      .then(() => {\r\n        return { type: \"callback\" };\r\n      });\r\n  }\r\n  if (_document.location.toString().includes(config.silent_redirect_uri)) {\r\n    return _userManager.signinSilentCallback().then(() => ({\r\n      type: \"callback\"\r\n    }));\r\n  }\r\n  return _userManager.getUser().then(user => {\r\n    state.oidcUser = user;\r\n    return { type: \"user\", user };\r\n  });\r\n};\r\n\r\nconst logout = () => {\r\n  state = {\r\n    oidcUser: null\r\n  };\r\n  const { events } = _userManager;\r\n  events.removeUserLoaded(onUserLoaded);\r\n  events.removeSilentRenewError(onError);\r\n  events.removeUserUnloaded(onUserUnloaded);\r\n  events.removeUserSignedOut(onUserUnloaded);\r\n  events.removeAccessTokenExpired(onAccessTokenExpired);\r\n};\r\n\r\nfunction signinSilent() {\r\n  state = {\r\n    oidcUser: null\r\n  };\r\n  return _userManager.signinSilent();\r\n}\r\n\r\nfunction signinRedirect(url) {\r\n  if (!url) {\r\n    url = _document.location.toString();\r\n  }\r\n  return _userManager.signinRedirect({\r\n    state: { url: url }\r\n  });\r\n}\r\n\r\nexport default {\r\n  state,\r\n  signinRedirect,\r\n  signinSilent,\r\n  logout,\r\n  init,\r\n  getUserSync() {\r\n    return state.oidcUser;\r\n  }\r\n};\r\n"],"file":"index.js"}